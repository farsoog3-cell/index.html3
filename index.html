<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø¥Ù†Ø³ØªØºØ±Ø§Ù… ÙˆÙ‡Ù…ÙŠ</title>
<style>
body {
    margin: 0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: #f0f2f5;
    color: #333;
}

header {
    background: linear-gradient(90deg, #007BFF, #0056b3);
    color: white;
    padding: 15px;
    text-align: center;
    font-size: 1.5em;
    font-weight: bold;
}

main {
    max-width: 600px;
    margin: 20px auto;
    padding: 0 10px;
}

.login-container, .post-container {
    background-color: white;
    padding: 15px;
    margin-bottom: 20px;
    border-radius: 15px;
    box-shadow: 0 3px 10px rgba(0,0,0,0.1);
}

input, textarea, button {
    width: 100%;
    padding: 10px;
    margin-top: 10px;
    border-radius: 8px;
    border: 1px solid #ccc;
    font-size: 1em;
    box-sizing: border-box;
}

button {
    background: linear-gradient(90deg, #007BFF, #00BFFF);
    color: white;
    border: none;
    cursor: pointer;
    font-weight: bold;
    transition: 0.3s;
}

button:hover {
    background: linear-gradient(90deg, #0056b3, #0099cc);
}

.post {
    background-color: #fff;
    border-radius: 15px;
    margin-bottom: 20px;
    box-shadow: 0 3px 10px rgba(0,0,0,0.1);
    position: relative;
    overflow: hidden;
}

.post-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 15px;
    background-color: #007BFF;
    color: white;
}

.username {
    font-weight: bold;
}

.options {
    cursor: pointer;
    font-size: 1.2em;
    position: relative;
}

.options-menu {
    display: none;
    position: absolute;
    top: 25px;
    right: 0;
    background: white;
    color: black;
    border: 1px solid #ccc;
    border-radius: 8px;
    overflow: hidden;
    z-index: 10;
}

.options-menu button {
    width: 100%;
    border: none;
    background: none;
    padding: 10px 15px;
    text-align: right;
    cursor: pointer;
}

.options-menu button:hover {
    background-color: #f0f0f0;
}

.post-content {
    padding: 15px;
    font-size: 1em;
    line-height: 1.5;
    white-space: pre-wrap;
}

.post-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 15px;
    background-color: #007BFF;
    color: white;
}

.post-actions {
    display: flex;
    gap: 20px;
    font-size: 1.2em;
    cursor: pointer;
    align-items: center;
}

.post-actions span {
    display: flex;
    align-items: center;
    gap: 5px;
}

.views {
    display: flex;
    align-items: center;
    gap: 5px;
    font-size: 0.9em;
}

/* Modal Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª */
.modal {
    display: none;
    position: fixed;
    z-index: 100;
    left: 0; top: 0;
    width: 100%; height: 100%;
    backdrop-filter: blur(5px);
    background-color: rgba(0,0,0,0.5);
}

.modal-content {
    background-color: #fefefe;
    margin: 50px auto;
    padding: 0;
    border-radius: 15px;
    max-width: 500px;
    height: 80%;
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

.modal-header {
    background-color: #007BFF;
    color: white;
    padding: 15px;
    font-weight: bold;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.close {
    font-size: 1.5em;
    cursor: pointer;
}

.modal-body {
    flex: 1;
    padding: 15px;
    overflow-y: auto;
    background-color: #f8f9fa;
}

.comment {
    border-bottom: 1px solid #ddd;
    padding: 8px 0;
}

.comment strong {
    margin-right: 5px;
}

.modal-footer {
    padding: 10px 15px;
    display: flex;
    gap: 10px;
    border-top: 1px solid #ccc;
}

.modal-footer input {
    flex: 1;
    border-radius: 20px;
    padding: 10px 15px;
    border: 1px solid #ccc;
}

.modal-footer button {
    border-radius: 20px;
    padding: 10px 20px;
}
</style>
</head>
<body>

<header>ØµÙØ­Ø© Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª Ù…Ø«Ù„ Ø¥Ù†Ø³ØªØºØ±Ø§Ù…</header>

<main>
    <div class="login-container" id="login-container">
        <h3>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</h3>
        <input type="text" id="username" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…">
        <button id="loginBtn">Ø¯Ø®ÙˆÙ„</button>
    </div>

    <div class="post-container" id="create-post-container" style="display:none;">
        <textarea id="post-content" placeholder="Ø§ÙƒØªØ¨ Ù…Ù†Ø´ÙˆØ±Ùƒ Ù‡Ù†Ø§..."></textarea>
        <button id="createPostBtn">Ù†Ø´Ø±</button>
    </div>

    <div id="posts-container"></div>
</main>

<!-- Modal Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª -->
<div id="commentModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª
            <span class="close" id="closeModal">&times;</span>
        </div>
        <div class="modal-body" id="modal-comments"></div>
        <div class="modal-footer">
            <input type="text" id="modal-comment-input" placeholder="Ø£Ø¶Ù ØªØ¹Ù„ÙŠÙ‚...">
            <button id="modal-comment-btn">ØªØ¹Ù„ÙŠÙ‚</button>
        </div>
    </div>
</div>

<script>
let currentUser = "";
const posts = [];
let currentCommentPostId = null;

// ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
document.getElementById('loginBtn').addEventListener('click', () => {
    const usernameInput = document.getElementById('username').value.trim();
    if (!usernameInput) { alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…"); return; }
    currentUser = usernameInput;
    document.getElementById('login-container').style.display = 'none';
    document.getElementById('create-post-container').style.display = 'block';
    renderPosts();
});

// Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù†Ø´ÙˆØ±
document.getElementById('createPostBtn').addEventListener('click', () => {
    const content = document.getElementById('post-content').value.trim();
    if (!content) return alert("Ø§Ù„Ù…Ù†Ø´ÙˆØ± ÙØ§Ø±Øº");
    const post = { id: Date.now(), user: currentUser, content, likes: 0, comments: [], views: 0 };
    posts.unshift(post);
    document.getElementById('post-content').value = '';
    renderPosts();
});

// Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª
function renderPosts() {
    const container = document.getElementById('posts-container');
    container.innerHTML = '';
    posts.forEach(post => {
        post.views++;
        const postDiv = document.createElement('div');
        postDiv.className = 'post';
        postDiv.innerHTML = `
            <div class="post-header">
                <div class="username">${post.user}</div>
                <div class="options" onclick="toggleMenu(${post.id})">â‹®
                    <div class="options-menu" id="menu-${post.id}">
                        <button onclick="editPost(${post.id})">ØªØ¹Ø¯ÙŠÙ„</button>
                        <button onclick="deletePost(${post.id})">Ø­Ø°Ù</button>
                    </div>
                </div>
            </div>
            <div class="post-content">${post.content}</div>
            <div class="post-footer">
                <div class="post-actions">
                    <span onclick="toggleLike(${post.id})">â¤ï¸ ${post.likes}</span>
                    <span onclick="openComments(${post.id})">ğŸ’¬ ØªØ¹Ù„ÙŠÙ‚</span>
                    <span onclick="sharePost(${post.id})">ğŸ”— Ù…Ø´Ø§Ø±ÙƒØ©</span>
                </div>
                <div class="views">ğŸ‘ ${post.views}</div>
            </div>
        `;
        container.appendChild(postDiv);
    });
}

// Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ù…Ù†Ø´ÙˆØ±
function toggleMenu(postId) {
    const menu = document.getElementById(`menu-${postId}`);
    menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
}

function editPost(postId) {
    const post = posts.find(p => p.id === postId);
    const newContent = prompt("ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ù†Ø´ÙˆØ±:", post.content);
    if (newContent !== null) {
        post.content = newContent;
        renderPosts();
    }
}

function deletePost(postId) {
    const index = posts.findIndex(p => p.id === postId);
    if (index !== -1) {
        posts.splice(index, 1);
        renderPosts();
    }
}

function toggleLike(postId) {
    const post = posts.find(p => p.id === postId);
    post.likes++;
    renderPosts();
}

function sharePost(postId) {
    alert("Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø¬Ø§Ù‡Ø²! (Ù…Ø­Ø§ÙƒØ§Ø©)");
}

// ÙØªØ­ Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª
function openComments(postId) {
    currentCommentPostId = postId;
    updateModalComments();
    document.getElementById('commentModal').style.display = 'block';
}

function updateModalComments() {
    const post = posts.find(p => p.id === currentCommentPostId);
    const modalComments = document.getElementById('modal-comments');
    modalComments.innerHTML = post.comments.map(c => `<div class="comment"><strong>${c.user}:</strong> ${c.text}</div>`).join('');
}

// Ø¥Ø¶Ø§ÙØ© ØªØ¹Ù„ÙŠÙ‚ Ù…Ù† Ù†Ø§ÙØ°Ø© Modal
document.getElementById('modal-comment-btn').addEventListener('click', () => {
    const input = document.getElementById('modal-comment-input');
    const text = input.value.trim();
    if (!text) return;
    const post = posts.find(p => p.id === currentCommentPostId);
    post.comments.push({user: currentUser, text});
    input.value = '';
    updateModalComments();
    renderPosts();
});

// Ø¥ØºÙ„Ø§Ù‚ Ù†Ø§ÙØ°Ø© Modal
document.getElementById('closeModal').addEventListener('click', () => {
    document.getElementById('commentModal').style.display = 'none';
});

window.onclick = function(event) {
    if (event.target == document.getElementById('commentModal')) {
        document.getElementById('commentModal').style.display = 'none';
    }
}
</script>

</body>
</html>
